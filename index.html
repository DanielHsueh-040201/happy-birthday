<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>生日卡片</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pacifico&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(45deg, #ffafbd, #ffc3a0);
            overflow: hidden;
        }

        .card {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1000px;
        }

        /* 禮物盒樣式 */
        .gift-container {
            position: relative;
            width: 260px;
            height: 190px;
            cursor: pointer;
            z-index: 10;
            transition: transform 0.3s ease;
        }

        .gift-container:hover {
            transform: scale(1.05);
        }

        .gift-box {
            position: absolute;
            width: 220px;
            height: 140px;
            background: linear-gradient(135deg, #ff85a2, #ff5c8d);
            bottom: 0;
            left: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2),
                        inset 0 -10px 15px rgba(0, 0, 0, 0.1),
                        inset 2px 2px 5px rgba(255, 255, 255, 0.5);
            overflow: hidden; /* 確保內容不會溢出 */
        }

        /* 將盒蓋和蝴蝶結組合起來 */
        .lid-with-bow {
            position: absolute;
            width: 240px;
            height: 40px;
            top: 10px;
            left: 10px;
            transform-origin: left center;
            transition: transform 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 5;
        }

        .gift-lid {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ff96b3, #ff6e9a);
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2),
                        inset 0 1px 5px rgba(255, 255, 255, 0.5);
        }

        /* 蝴蝶結樣式 - 附著在盒蓋上 */
        .bow {
            position: absolute;
            width: 45px;
            height: 45px;
            top: -12px;
            left: 97px;
            z-index: 6;
        }

        .bow-left, .bow-right {
            position: absolute;
            width: 30px;
            height: 40px;
            background: linear-gradient(135deg, #7080e7, #5f70d9);
            top: 0;
            border-radius: 50px 50px 0 50px;
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.2),
                        inset 1px 1px 3px rgba(255, 255, 255, 0.3);
        }

        .bow-left {
            left: -15px;
            transform: rotate(-30deg);
        }

        .bow-right {
            right: -15px;
            transform: rotate(30deg) scaleX(-1);
        }

        .bow-center {
            position: absolute;
            width: 16px;
            height: 16px;
            background: linear-gradient(135deg, #5a6ad1, #4a56b5);
            border-radius: 50%;
            top: 12px;
            left: 14px;
            z-index: 5;
            box-shadow: 0 2px 3px rgba(0, 0, 0, 0.2),
                        inset 1px 1px 2px rgba(255, 255, 255, 0.3);
        }

        .ribbon {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 3;
        }

        .ribbon-vertical {
            position: absolute;
            width: 15px;
            height: 140px;
            background: linear-gradient(to right, #7080e7, #5f70d9);
            top: 50px;
            left: 122px;
            z-index: 1;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .ribbon-horizontal {
            position: absolute;
            width: 220px;
            height: 15px;
            background: linear-gradient(to bottom, #7080e7, #5f70d9);
            top: 82px;
            left: 20px;
            z-index: 1;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .click-me {
            position: absolute;
            bottom: -35px;
            left: 0;
            width: 100%;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            animation: pulse 1s infinite alternate;
        }

        @keyframes pulse {
            from { transform: scale(1); }
            to { transform: scale(1.1); }
        }

        /* 定義盒子開口區域 */
        .box-opening {
            position: absolute;
            width: 220px;
            height: 40px;
            top: 0;
            left: 0;
            overflow: hidden;
            z-index: 2;
        }

        /* 裝飾元素 */
        .balloon {
            position: absolute;
            width: 45px;
            height: 55px;
            border-radius: 50%;
            opacity: 0;
            transition: all 1.5s cubic-bezier(0.215, 0.61, 0.355, 1);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1),
                        inset 5px 5px 10px rgba(255, 255, 255, 0.2),
                        inset -5px -5px 10px rgba(0, 0, 0, 0.1);
            z-index: 4;
        }

        .balloon::after {
            content: '';
            position: absolute;
            width: 2px;
            height: 60px;
            background: rgba(255, 255, 255, 0.7);
            bottom: -60px;
            left: 50%;
            transform: translateX(-50%);
        }

        .happy-birthday {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            opacity: 0;
            font-family: 'Pacifico', cursive;
            font-size: 48px;
            color: white;
            text-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
            white-space: nowrap;
            transition: all 1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 20;
        }

        /* 紙屑樣式 */
        .confetti {
            position: absolute;
            opacity: 0;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            z-index: 4;
        }

        /* 底部陰影 */
        .shadow {
            position: absolute;
            width: 220px;
            height: 20px;
            background: rgba(0, 0, 0, 0.1);
            bottom: -20px;
            left: 20px;
            border-radius: 50%;
            filter: blur(10px);
        }
    </style>
</head>
<body>
    <div class="card" id="card">
        <div class="happy-birthday" id="happyBirthday">Happy Birthday!</div>
        
        <div class="gift-container" id="giftContainer">
            <div class="click-me" id="clickMe">Click Me!</div>
            
            <!-- 將蓋子和蝴蝶結組合在一起 -->
            <div class="lid-with-bow" id="lidWithBow">
                <div class="gift-lid"></div>
                <div class="bow">
                    <div class="bow-left"></div>
                    <div class="bow-right"></div>
                    <div class="bow-center"></div>
                </div>
            </div>
            
            <div class="gift-box">
                <!-- 添加盒子開口區域，用於創建氣球和紙屑 -->
                <div class="box-opening" id="boxOpening"></div>
            </div>
            <div class="shadow"></div>
            
            <!-- 緞帶裝飾 -->
            <div class="ribbon">
                <div class="ribbon-vertical"></div>
                <div class="ribbon-horizontal"></div>
            </div>
        </div>
    </div>

    <script>
        // 確保DOM完全載入後執行
        document.addEventListener('DOMContentLoaded', function() {
            // 獲取元素引用
            const giftContainer = document.getElementById('giftContainer');
            const lidWithBow = document.getElementById('lidWithBow');
            const happyBirthday = document.getElementById('happyBirthday');
            const clickMe = document.getElementById('clickMe');
            const card = document.getElementById('card');
            const boxOpening = document.getElementById('boxOpening');
            
            // 氣球顏色
            const balloonColors = [
                'radial-gradient(circle at 30% 30%, #FF7B7B, #FF5757)',
                'radial-gradient(circle at 30% 30%, #FF8AD8, #FF66C4)',
                'radial-gradient(circle at 30% 30%, #7B94FF, #5D7CFF)',
                'radial-gradient(circle at 30% 30%, #5ACBFF, #38B6FF)',
                'radial-gradient(circle at 30% 30%, #A673FF, #8C52FF)',
                'radial-gradient(circle at 30% 30%, #7DEBF0, #5CE1E6)',
                'radial-gradient(circle at 30% 30%, #25E0C1, #00C2A8)',
                'radial-gradient(circle at 30% 30%, #FFAA6C, #FF914D)'
            ];
            
            let isOpened = false;
            
            // 直接在禮物盒上添加點擊事件
            giftContainer.onclick = function() {
                openGift();
            };
            
            // 打開禮物盒的函數
            function openGift() {
                if (isOpened) return;
                isOpened = true;
                
                // 隱藏提示文字
                clickMe.style.opacity = '0';
                
                // 打開盒蓋，使其轉向左側並稍微上移
                // 這樣設計可以確保盒蓋不會擋住盒口，又有自然的動畫效果
                lidWithBow.style.transform = 'rotate(-110deg) translateY(-20px)';
                
                // 顯示生日祝福
                setTimeout(() => {
                    happyBirthday.style.opacity = '1';
                    happyBirthday.style.transform = 'translate(-50%, -200px) scale(1)';
                }, 400);
                
                // 放出氣球 - 從盒口出現
                for (let i = 0; i < 12; i++) {
                    setTimeout(() => createBalloon(i), i * 100 + 300);
                }
                
                // 噴灑紙屑 - 從盒口出現
                for (let i = 0; i < 40; i++) {
                    setTimeout(() => createConfetti(i), i * 20 + 300);
                }
            }
            
            // 創建氣球 - 從盒口出現
            function createBalloon(i) {
                const balloon = document.createElement('div');
                balloon.classList.add('balloon');
                balloon.style.background = balloonColors[i % balloonColors.length];
                
                // 獲取盒口的位置和尺寸
                const boxRect = boxOpening.getBoundingClientRect();
                const cardRect = card.getBoundingClientRect();
                
                // 計算相對於卡片的位置
                const boxLeft = boxRect.left - cardRect.left;
                const boxTop = boxRect.top - cardRect.top;
                const boxWidth = boxRect.width;
                
                // 將氣球放置在盒口
                balloon.style.left = `${boxLeft + (Math.random() * boxWidth * 0.8) + (boxWidth * 0.1)}px`;
                balloon.style.top = `${boxTop}px`;  // 從盒口頂部開始
                
                card.appendChild(balloon);
                
                // 更加自然的飛行路徑
                const randomX = Math.random() * 200 - 100;
                const randomHeight = 300 + Math.random() * 300;
                
                requestAnimationFrame(() => {
                    balloon.style.opacity = '1';
                    balloon.style.transform = `translateY(-${randomHeight}px) translateX(${randomX}px)`;
                    balloon.style.transitionDelay = `${Math.random() * 0.3}s`;
                });
                
                // 移除元素
                setTimeout(() => {
                    balloon.remove();
                }, 8000);
            }
            
            // 創建紙屑 - 從盒口出現
            function createConfetti(i) {
                const confetti = document.createElement('div');
                confetti.classList.add('confetti');
                
                // 隨機大小
                const size = 4 + Math.random() * 6;
                confetti.style.width = `${size}px`;
                confetti.style.height = `${size}px`;
                
                // 隨機顏色
                const colorIndex = Math.floor(Math.random() * balloonColors.length);
                let baseColor;
                
                // 使用純色而非漸變
                switch (colorIndex) {
                    case 0: baseColor = '#FF5757'; break;
                    case 1: baseColor = '#FF66C4'; break;
                    case 2: baseColor = '#5D7CFF'; break;
                    case 3: baseColor = '#38B6FF'; break;
                    case 4: baseColor = '#8C52FF'; break;
                    case 5: baseColor = '#5CE1E6'; break;
                    case 6: baseColor = '#00C2A8'; break;
                    case 7: baseColor = '#FF914D'; break;
                    default: baseColor = '#FF5757';
                }
                
                confetti.style.background = baseColor;
                
                // 隨機形狀
                const shapes = ['circle', 'square', 'triangle'];
                const shape = shapes[Math.floor(Math.random() * shapes.length)];
                
                if (shape === 'circle') {
                    confetti.style.borderRadius = '50%';
                } else if (shape === 'triangle') {
                    confetti.style.width = '0';
                    confetti.style.height = '0';
                    confetti.style.borderLeft = `${size/2}px solid transparent`;
                    confetti.style.borderRight = `${size/2}px solid transparent`;
                    confetti.style.borderBottom = `${size}px solid ${baseColor}`;
                    confetti.style.background = 'transparent';
                }
                
                // 獲取盒口的位置和尺寸
                const boxRect = boxOpening.getBoundingClientRect();
                const cardRect = card.getBoundingClientRect();
                
                // 計算相對於卡片的位置
                const boxLeft = boxRect.left - cardRect.left;
                const boxTop = boxRect.top - cardRect.top;
                const boxWidth = boxRect.width;
                
                // 將紙屑放置在盒口
                confetti.style.left = `${boxLeft + (Math.random() * boxWidth * 0.8) + (boxWidth * 0.1)}px`;
                confetti.style.top = `${boxTop}px`;  // 從盒口頂部開始
                
                card.appendChild(confetti);
                
                // 向上飛散的效果
                const randomX = Math.random() * 200 - 100;
                const randomY = 150 + Math.random() * 250;
                const randomRotate = Math.random() * 360;
                
                requestAnimationFrame(() => {
                    confetti.style.opacity = '1';
                    confetti.style.transform = `translateY(-${randomY}px) translateX(${randomX}px) rotate(${randomRotate}deg)`;
                    confetti.style.transition = `all ${1.5 + Math.random() * 1.5}s ease-out`;
                });
                
                // 移除元素
                setTimeout(() => {
                    confetti.remove();
                }, 5000);
            }
            
            // 自動打開禮物盒的備用功能（等待5秒）
            setTimeout(() => {
                if (!isOpened) {
                    openGift();
                }
            }, 5000);
        });
    </script>
</body>
</html>
